# 📁 Project Structure

This document describes the organized file structure of the Angel Broking Trade Report system.

## 🗂️ Directory Structure

```
TradeRecords/
├── 📄 Documentation
│   ├── README.md                 # Project overview and basic usage
│   ├── AUTOMATION-GUIDE.md       # Complete automation setup guide
│   ├── TROUBLESHOOTING.md        # Debug and troubleshooting guide
│   └── PROJECT-STRUCTURE.md      # This file - project organization
│
├── 📊 data/                      # All JSON data files
│   ├── config.json              # TOTP secrets and configuration
│   ├── response-jpw.json        # Latest JPW account data
│   ├── response-pew.json        # Latest PEW account data
│   ├── Angel.postman_collection.json  # Postman API collection
│   ├── PLReport.json            # Historical P&L data
│   └── credentials.json         # Empty credentials file
│
├── 🚀 scripts/                  # Shell scripts for automation
│   ├── start-scheduler.sh       # Start daily automation
│   ├── test-automation.sh       # Test the complete system
│   └── run-trade-report.sh      # Manual execution with TOTP
│
├── 💻 js/                       # All JavaScript files
│   ├── 🤖 Main Automation
│   │   ├── automated-fetch.js   # Main automation with TOTP
│   │   ├── scheduler.js         # Daily cron scheduler
│   │   └── fetch-trade-data.js  # Manual fetch with TOTP input
│   │
│   ├── 📈 Data Processing
│   │   ├── index.js            # Main report generator
│   │   └── index_bkp.js        # Backup of original processor
│   │
│   ├── ⚙️ Setup & Configuration
│   │   └── setup-totp.js       # Interactive TOTP setup
│   │
│   └── 🔧 Debug & Testing
│       ├── debug-totp.js       # TOTP debugging tool
│       ├── test-ist-totp.js    # IST timezone TOTP test
│       ├── manual-login-test.js # Manual API login test
│       └── test-login.js       # Advanced login testing
│
├── 📁 bkp/                     # Generated trade reports (by month)
│   ├── Aug-2025/
│   │   └── 21-Aug-2025.txt     # Daily trade reports
│   ├── Jul-2021/
│   └── ... (historical months)
│
├── 📦 Node.js Files
│   ├── package.json            # Project dependencies & scripts
│   ├── package-lock.json       # Dependency lock file
│   └── node_modules/           # Installed packages
│
└── 📝 logs/                    # Generated by scheduler (auto-created)
    └── scheduler-YYYY-MM-DD.log # Daily scheduler logs
```

## 📋 File Categories

### 🔧 Configuration Files
| File | Location | Purpose |
|------|----------|---------|
| `config.json` | `data/` | TOTP secrets and API configuration |
| `package.json` | Root | Project metadata and npm scripts |

### 📊 Data Files
| File | Location | Purpose |
|------|----------|---------|
| `response-jpw.json` | `data/` | Latest JPW account OrderBook data |
| `response-pew.json` | `data/` | Latest PEW account OrderBook data |
| `Angel.postman_collection.json` | `data/` | API endpoints and configuration |
| `PLReport.json` | `data/` | Historical profit/loss data |

### 🚀 Automation Scripts
| File | Location | Purpose |
|------|----------|---------|
| `automated-fetch.js` | `js/` | Main automation with TOTP generation |
| `scheduler.js` | `js/` | Daily cron job scheduler |
| `fetch-trade-data.js` | `js/` | Manual execution with TOTP input |

### 📈 Processing Scripts
| File | Location | Purpose |
|------|----------|---------|
| `index.js` | `js/` | Main trade report generator |
| `index_bkp.js` | `js/` | Backup of original processor |

### 🛠️ Utility Scripts
| File | Location | Purpose |
|------|----------|---------|
| `setup-totp.js` | `js/` | Interactive TOTP configuration |
| `debug-totp.js` | `js/` | TOTP debugging and testing |
| `test-ist-totp.js` | `js/` | IST timezone TOTP testing |
| `manual-login-test.js` | `js/` | Manual API login testing |

### 🔨 Shell Scripts
| File | Location | Purpose |
|------|----------|---------|
| `start-scheduler.sh` | `scripts/` | Start daily automation |
| `test-automation.sh` | `scripts/` | Test complete system |
| `run-trade-report.sh` | `scripts/` | Manual execution helper |

## 🎯 Quick Commands

### Using NPM Scripts (Recommended)
```bash
npm run setup              # Configure TOTP secrets
npm run test-automation    # Test complete system
npm run start-scheduler    # Start daily automation
npm run fetch-now         # Manual fetch with auto-TOTP
npm run generate-report   # Process existing data
```

### Direct Execution
```bash
# Setup and configuration
node js/setup-totp.js

# Testing and debugging
node js/debug-totp.js
node js/test-ist-totp.js
node js/manual-login-test.js

# Manual execution
node js/automated-fetch.js
node js/fetch-trade-data.js [jpw_totp] [pew_totp]
node js/index.js

# Automation
node js/scheduler.js
./scripts/start-scheduler.sh
./scripts/test-automation.sh
```

## 🔒 Security Notes

### Protected Files
- `data/config.json` - Contains TOTP secrets (never commit!)
- `logs/` - May contain sensitive data (auto-generated)

### .gitignore Recommendations
```
data/config.json
logs/
node_modules/
```

## 📝 File Path Updates

After reorganization, all scripts have been updated to use correct paths:
- Configuration: `./data/config.json`
- Response files: `./data/response-*.json`
- Script execution: `node js/script-name.js`
- Shell scripts: `./scripts/script-name.sh`

## 🔄 Migration Notes

If you have an existing setup, the reorganization automatically:
- ✅ Moved all JSON files to `data/` folder
- ✅ Moved all shell scripts to `scripts/` folder  
- ✅ Moved all JavaScript files to `js/` folder
- ✅ Updated all file paths in scripts
- ✅ Updated npm scripts in package.json
- ✅ Preserved functionality - everything works the same

The system maintains backward compatibility while providing better organization.
