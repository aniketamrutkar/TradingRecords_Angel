# ğŸ“ Project Structure

This document describes the organized file structure of the Angel Broking Trade Report system.

## ğŸ—‚ï¸ Directory Structure

```
TradeRecords/
â”œâ”€â”€ ğŸ“„ Documentation
â”‚   â”œâ”€â”€ README.md                 # Project overview and basic usage
â”‚   â”œâ”€â”€ AUTOMATION-GUIDE.md       # Complete automation setup guide
â”‚   â”œâ”€â”€ TROUBLESHOOTING.md        # Debug and troubleshooting guide
â”‚   â””â”€â”€ PROJECT-STRUCTURE.md      # This file - project organization
â”‚
â”œâ”€â”€ ğŸ“Š data/                      # All JSON data files
â”‚   â”œâ”€â”€ config.json              # TOTP secrets and configuration
â”‚   â”œâ”€â”€ response-jpw.json        # Latest JPW account data
â”‚   â”œâ”€â”€ response-pew.json        # Latest PEW account data
â”‚   â”œâ”€â”€ Angel.postman_collection.json  # Postman API collection
â”‚   â”œâ”€â”€ PLReport.json            # Historical P&L data
â”‚   â””â”€â”€ credentials.json         # Empty credentials file
â”‚
â”œâ”€â”€ ğŸš€ scripts/                  # Shell scripts for automation
â”‚   â”œâ”€â”€ start-scheduler.sh       # Start daily automation
â”‚   â”œâ”€â”€ test-automation.sh       # Test the complete system
â”‚   â””â”€â”€ run-trade-report.sh      # Manual execution with TOTP
â”‚
â”œâ”€â”€ ğŸ’» js/                       # All JavaScript files
â”‚   â”œâ”€â”€ ğŸ¤– Main Automation
â”‚   â”‚   â”œâ”€â”€ automated-fetch.js   # Main automation with TOTP
â”‚   â”‚   â”œâ”€â”€ scheduler.js         # Daily cron scheduler
â”‚   â”‚   â””â”€â”€ fetch-trade-data.js  # Manual fetch with TOTP input
â”‚   â”‚
â”‚   â”œâ”€â”€ ğŸ“ˆ Data Processing
â”‚   â”‚   â”œâ”€â”€ index.js            # Main report generator
â”‚   â”‚   â””â”€â”€ index_bkp.js        # Backup of original processor
â”‚   â”‚
â”‚   â”œâ”€â”€ âš™ï¸ Setup & Configuration
â”‚   â”‚   â””â”€â”€ setup-totp.js       # Interactive TOTP setup
â”‚   â”‚
â”‚   â””â”€â”€ ğŸ”§ Debug & Testing
â”‚       â”œâ”€â”€ debug-totp.js       # TOTP debugging tool
â”‚       â”œâ”€â”€ test-ist-totp.js    # IST timezone TOTP test
â”‚       â”œâ”€â”€ manual-login-test.js # Manual API login test
â”‚       â””â”€â”€ test-login.js       # Advanced login testing
â”‚
â”œâ”€â”€ ğŸ“ bkp/                     # Generated trade reports (by month)
â”‚   â”œâ”€â”€ Aug-2025/
â”‚   â”‚   â””â”€â”€ 21-Aug-2025.txt     # Daily trade reports
â”‚   â”œâ”€â”€ Jul-2021/
â”‚   â””â”€â”€ ... (historical months)
â”‚
â”œâ”€â”€ ğŸ“¦ Node.js Files
â”‚   â”œâ”€â”€ package.json            # Project dependencies & scripts
â”‚   â”œâ”€â”€ package-lock.json       # Dependency lock file
â”‚   â””â”€â”€ node_modules/           # Installed packages
â”‚
â””â”€â”€ ğŸ“ logs/                    # Generated by scheduler (auto-created)
    â””â”€â”€ scheduler-YYYY-MM-DD.log # Daily scheduler logs
```

## ğŸ“‹ File Categories

### ğŸ”§ Configuration Files
| File | Location | Purpose |
|------|----------|---------|
| `config.json` | `data/` | TOTP secrets and API configuration |
| `package.json` | Root | Project metadata and npm scripts |

### ğŸ“Š Data Files
| File | Location | Purpose |
|------|----------|---------|
| `response-jpw.json` | `data/` | Latest JPW account OrderBook data |
| `response-pew.json` | `data/` | Latest PEW account OrderBook data |
| `Angel.postman_collection.json` | `data/` | API endpoints and configuration |
| `PLReport.json` | `data/` | Historical profit/loss data |

### ğŸš€ Automation Scripts
| File | Location | Purpose |
|------|----------|---------|
| `automated-fetch.js` | `js/` | Main automation with TOTP generation |
| `scheduler.js` | `js/` | Daily cron job scheduler |
| `fetch-trade-data.js` | `js/` | Manual execution with TOTP input |

### ğŸ“ˆ Processing Scripts
| File | Location | Purpose |
|------|----------|---------|
| `index.js` | `js/` | Main trade report generator |
| `index_bkp.js` | `js/` | Backup of original processor |

### ğŸ› ï¸ Utility Scripts
| File | Location | Purpose |
|------|----------|---------|
| `setup-totp.js` | `js/` | Interactive TOTP configuration |
| `debug-totp.js` | `js/` | TOTP debugging and testing |
| `test-ist-totp.js` | `js/` | IST timezone TOTP testing |
| `manual-login-test.js` | `js/` | Manual API login testing |

### ğŸ”¨ Shell Scripts
| File | Location | Purpose |
|------|----------|---------|
| `start-scheduler.sh` | `scripts/` | Start daily automation |
| `test-automation.sh` | `scripts/` | Test complete system |
| `run-trade-report.sh` | `scripts/` | Manual execution helper |

## ğŸ¯ Quick Commands

### Using NPM Scripts (Recommended)
```bash
npm run setup              # Configure TOTP secrets
npm run test-automation    # Test complete system
npm run start-scheduler    # Start daily automation
npm run fetch-now         # Manual fetch with auto-TOTP
npm run generate-report   # Process existing data
```

### Direct Execution
```bash
# Setup and configuration
node js/setup-totp.js

# Testing and debugging
node js/debug-totp.js
node js/test-ist-totp.js
node js/manual-login-test.js

# Manual execution
node js/automated-fetch.js
node js/fetch-trade-data.js [jpw_totp] [pew_totp]
node js/index.js

# Automation
node js/scheduler.js
./scripts/start-scheduler.sh
./scripts/test-automation.sh
```

## ğŸ”’ Security Notes

### Protected Files
- `data/config.json` - Contains TOTP secrets (never commit!)
- `logs/` - May contain sensitive data (auto-generated)

### .gitignore Recommendations
```
data/config.json
logs/
node_modules/
```

## ğŸ“ File Path Updates

After reorganization, all scripts have been updated to use correct paths:
- Configuration: `./data/config.json`
- Response files: `./data/response-*.json`
- Script execution: `node js/script-name.js`
- Shell scripts: `./scripts/script-name.sh`

## ğŸ”„ Migration Notes

If you have an existing setup, the reorganization automatically:
- âœ… Moved all JSON files to `data/` folder
- âœ… Moved all shell scripts to `scripts/` folder  
- âœ… Moved all JavaScript files to `js/` folder
- âœ… Updated all file paths in scripts
- âœ… Updated npm scripts in package.json
- âœ… Preserved functionality - everything works the same

The system maintains backward compatibility while providing better organization.
